<h1>nameTBD</h1>
<h2 id= "header2">Floor 1</h2>

<body onload="setup()"></body>
<script src="Mishmash.js"></script>

<script>
    function setup(){
        mapData = new GameMap(8, 8);  
        mapData.add_enemy(spider_tile());
        mapData.display();
    }

    function move(x, y){
        try{
            mapData.player_move(x, y);
            mapData.display();
            mapData.enemy_turn();
            mapData.display();
        }
        catch (error){
            var m = error.message;
            if(m === 'floor complete'){
                var floor = mapData.erase(mapData.player_health());
                var spawner = [spider_tile, turret_tile, scythe_tile, knight_tile];
                for(var i = 0; i < floor;){
                    var choice = Math.floor(Math.random() * spawner.length);
                    var new_enemy = spawner[choice]();
                    mapData.add_enemy(new_enemy);
                    i += new_enemy.difficulty;
                }
                document.getElementById('header2').innerText = 'Floor ' + floor;
                mapData.display();
            }
            else if (m === 'x out of bounds' || m === 'y out of bounds'){
                // Do nothing
            }
            else{
                console.log(m);
            }
        }
    }

    function spin_attack(){
        attack(1, 1);
        attack(1, 0);
        attack(1, -1);
        attack(0, 1);
        attack(-1, 1);
        attack(-1, 0);
        attack(-1, -1);
        attack(0, -1);
        mapData.display();
        mapData.enemy_turn();
        mapData.display();
    }

    function attack(x, y){
        try{
            mapData.player_attack(x, y);
        }
        catch(error){
            var m = error.message;
            if(m === "x out of bounds" || m === "y out of bounds"){
                // Do nothing
            }
            else{
                console.log(error);
            }
        }
    }
</script>

<table id="mapDisplay"></table>
<input type= "button" value= "Up" name="Up" onClick="move(0, -1)"><br>
<input type= "button" value= "Left" name="Left" onClick="move(-1, 0)">
<input type= "button" value= "Right" name="Right" onClick="move(1, 0)"><br>
<input type= "button" value= "Down" name="Down" onClick="move(0, 1)"><br>
<input type= "button" value= "Spin Attack" name="Spin" onClick="spin_attack()"><br>